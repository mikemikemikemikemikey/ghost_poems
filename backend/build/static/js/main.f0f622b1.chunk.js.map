{"version":3,"sources":["services/serviceHelper.js","services/poems.js","reducers/poemReducer.js","hooks/index.js","components/Notification.js","reducers/userReducer.js","reducers/messageReducer.js","store.js","services/socket.js","components/Style.js","components/PoemChild.js","components/PoemTitle.js","services/users.js","components/Poem.js","services/login.js","components/Login.js","components/About.js","components/CreateUser.js","components/NewPoem.js","App.js","index.js"],"names":["handle","promise","then","data","undefined","catch","error","config","headers","editContent","content","id","a","axios","put","request","response","status","Error","editTitle","title","addLike","poem","_id","addContent","head","post","removePoem","delete","setConfig","newToken","Authorization","getAll","get","create","includes","removeLike","initializePoems","dispatch","poemService","poems","type","poemReducer","state","action","useField","useState","value","setValue","onChange","event","target","onSubmit","Notification","message","errorStyle","color","background","fontSize","borderStyle","borderRadius","padding","paddingBottom","marginTop","marginBottom","style","className","data-cy","loginUser","user","userReducer","newMessage","messageReducer","reducer","combineReducers","store","createStore","composeWithDevTools","applyMiddleware","thunk","socket","socketIOClient","on","Button","styled","button","props","enjoyed","Input","div","input","StyledPoem","StyledTextArea","label","textarea","PoemChild","setMessage","edit","setEdit","editedContent","formattedContent","split","filter","word","match","submitEdit","preventDefault","emit","mess","username","setTimeout","deletePoem","rows","cols","onClick","map","item","i","key","PoemTitle","getUser","newUser","Poem","useSelector","enjoyStyle","setEnjoyStyle","show","toggle","setToggle","addedContent","enjoyB","useRef","useEffect","userService","likedPoems","userLikes","addEnjoy","current","blur","likes","children","c","console","log","toggleView","submitContent","ref","login","credentials","Login","useDispatch","history","useHistory","password","handleLogin","loginService","window","localStorage","setItem","JSON","stringify","token","push","classname","About","href","CreateUser","createUser","length","NewPoem","createPoem","App","sort","setSort","viewSort","setViewSort","location","useLocation","loggedUserJSON","getItem","parse","pathname","handleView","sortStyle","display","src","alt","activeStyle","fontWeight","to","exact","removeItem","options","placeholder","path","b","da","Date","updatedAt","getTime","sortNew","sortTop","sortSelector","p","process","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f0f622b1.chunk.js","sourcesContent":["const handle = (promise) => {\n  return promise\n    .then(data => ([data, undefined]))\n    .catch(error => [undefined, error])\n}\n\nexport default handle","import axios from 'axios'\nimport handle from './serviceHelper'\nconst baseUrl = '/api/poems'\n\nlet config = {headers: null}\n\nconst setConfig = newToken => {\n  config = { headers: {Authorization: `bearer ${newToken}`}, }\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\nconst editContent = async (content, id) => {\n  const [request, error] = await handle(axios.put(`/api/poems/child/${id}`, {content}, config))\n  if(request) return\n  if(error.response.status === 401) throw new Error('wrong user')\n  throw new Error('sorry lines are too long')\n}\nconst editTitle = async (title, id) => {\n const [request, error] = await handle(axios.put(`/api/poems/title/${id}`, {title}, config ))\n if(request) return\n if(error.response.status === 401) throw new Error('wrong user')\n throw new Error('sorry too long')\n}\nconst addLike = async (poem) => {\n  await axios.put(`/api/poems/child/${poem._id}/${true}`, poem, config)\n}\nconst addContent = async (poem, head) => {\n  const [request, error] = await handle(axios.post(`api/poems/${head}`, poem, config))\n  if(request) return\n  if(error.response) {\n    throw new Error('sorry lines are too long')\n  }\n  throw new Error('error')\n}\nconst removePoem = async (poem) => {\n  await axios.delete(`api/poems/${poem._id}`, config)\n  \n}\nconst create = async (poem) => {\n  const [request, error] = await handle(axios.post(baseUrl, poem, config))\n  if(request) return request\n    if(error.response) {\n    if(error.response.data.error.includes('title')){\n        throw new Error('title is too long')\n      } else if (error.response.data.error.includes('content')){\n      throw new Error('first lines are too long')\n      } else { throw new Error( 'error')}\n    }  \n    throw new Error('error')\n}\nconst removeLike = async (id) => {\n  await axios.put(`api/poems/unlike/${id}`, null, config)\n}\n\nexport default { editTitle, addContent, setConfig, getAll, create, addLike, removePoem, editContent, removeLike}","import poemService from '../services/poems'\n\nconst poemReducer = (state =[], action) => {\n  switch(action.type){\n    case 'INIT':\n      return action.poems\n    case 'UPDATE':\n      return action.poems\n    default:\n      return state\n    }\n}\n\nexport const initializePoems = () => {\n  return async dispatch => {\n    const poems = await poemService.getAll()\n    dispatch({ type: 'INIT', poems })\n  }\n}\n\nexport default poemReducer","import { useState, } from 'react'\n\nconst useField = (type) => {\n  const [value, setValue] = useState('')\n\n  const onChange = (event) => {\n    setValue(event.target.value)\n  }\n  const onSubmit = () => {\n    setValue(\"\")\n  }\n  \n  return {\n    type,\n    value,\n    onChange,\n    onSubmit,\n  }\n}\n\nexport default useField","import React from 'react'\n\nconst Notification = ({ message }) => {\n  const errorStyle = {\n    color: 'red',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    paddingBottom: 14,\n    marginTop: 8,\n    marginBottom: 0,\n  }\n\n  if (!message.error) errorStyle.color = 'green'\n  if (message.message === null) {\n    return null\n  }\n\n  return (\n    <div style={errorStyle} className=\"error\" data-cy='message'>\n      {message.message}\n    </div>\n  )\n}\n\nexport default Notification\n","const userReducer = (state = null, action) => {\n  switch(action.type){\n  case 'LOGIN':\n    return action.user\n  case 'LOGOUT' :\n    return null\n  default:\n    return state\n  }\n}\n\nexport const loginUser = (user) => {\n  return dispatch => {\n    dispatch({ type: 'LOGIN',\n      user\n    })\n  }\n}\n\nexport const logoutUser = () => {\n  return dispatch => {\n    dispatch({ type: 'LOGOUT' })\n  }\n}\n\n\nexport default userReducer","\nconst messageReducer = (state = {message: null, error: false}, action) => {\n  switch(action.type){\n  case 'NEW':\n    return {message: action.message, error: action.error}\n  case 'REMOVE' :\n    return {message : null, error: false}\n  default:\n    return state\n  }\n}\n\nexport const newMessage = (message, error) => {\n  return dispatch => {\n    dispatch({\n      type: 'NEW',\n      message: message,\n      error\n    })\n  }\n}\n\nexport const removeMessage = () => {\n  return dispatch => {\n    dispatch({\n      type: 'REMOVE',\n    })\n  }\n}\n\nexport default messageReducer","\nimport { createStore, combineReducers, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport poemReducer from './reducers/poemReducer'\nimport userReducer from './reducers/userReducer'\nimport messageReducer from './reducers/messageReducer'\n\nconst reducer = combineReducers({\n  poems: poemReducer,\n  user: userReducer,\n  message: messageReducer,\n})\n\n\n  \n export const store = createStore(\n    reducer,\n    composeWithDevTools(\n      applyMiddleware(thunk),\n    ),\n  )\n\n  export default store","import socketIOClient from 'socket.io-client'\nimport { initializePoems } from '../reducers/poemReducer'\nimport { store } from '../store'\n\nconst socket = socketIOClient('/')\n\nsocket.on('data_send', () => {\n  store.dispatch(initializePoems())\n})\nexport default socket","import styled from 'styled-components'\n\nexport const Button = styled.button`\n  cursor: pointer;\n  background: ${(props) => (props.enjoyed ? 'palevioletred'\n    : 'transparent')};\n  font-size 1em;\n  color: ${(props) => (props.enjoyed ? 'white'\n    : '#f2e8bf')};\n  border: 2px solid palevioletred;\n  margin: .25em .25em;\n  padding: 0.25em 1em;\n  transition: .5s all ease-out;\n\n  &:hover {\n    background-color: palevioletred;\n    color: white;\n  }\n  &:focus {\n    background-color: palevioletred;\n    color: white;\n  }\n`\nexport const Navigation = styled.div`\ndisplay: flex;\njustify-content: space-evenly;\nflex-wrap: wrap;\nbackground: transparent;\npadding: 1em;\nposition: sticky;\ntop: 0;\nz-index: 2;\ntext-align: center;\n`\nexport const Input = styled.input`\nbackground-color: transparent;\nborder: 2px solid #f2e8bf;\nfont-size 1em;\ncolor: #f2e8bf;\nmax-width 90%;\n`\n\nexport const StyledPoem = styled.div`\nmax-width: 80%;\nbackground-color: transparent;\nborder-bottom: 2px solid gray;\n\n`\n\nexport const StyledLabel = styled.label`\nposition: absolute;\nwidth: 20%;\ntop: 8.2%;\nright: 8%;\nz-index: 1;\n`\n\nexport const StyledTextArea = styled.textarea`\nbackground-color: transparent;\nborder: 2px solid #f2e8bf;\nfont-size 16px;\ncolor: #f2e8bf;\nmax-width 90%;\n`\n","import React, { useState } from 'react'\nimport useField from '../hooks'\nimport poemService from '../services/poems'\nimport Notification from './Notification'\nimport socket from '../services/socket'\nimport { Button, StyledTextArea } from './Style'\n\nconst PoemChild = ({ poem, user }) => {\n  const [message, setMessage] = useState({ message: null, error: false })\n  const [edit, setEdit] = useState(false)\n  const editedContent = useField('text')\n  const { content } = poem\n  const formattedContent = content.split(',').filter(word => word.match('.+[^ ]') )\n\n  const editContent = () => {\n    setEdit(true)\n    editedContent.onChange({ target: { value: content } })\n  }\n  const submitEdit = async (event) => {\n    try {\n      event.preventDefault()\n      if(!user) throw new Error('please login to edit')\n      if (editedContent.value === '') throw new Error('ghostin too hard')\n      await poemService.editContent(editedContent.value, poem._id)\n      setEdit(false)\n      socket.emit('data_request')\n    } catch (err) {\n      setEdit(false)\n      let mess = err.message\n      if (err.message === 'wrong user') mess = `only ${poem.user.username} can edit this`\n      setMessage({ message: mess, error: true })\n      setTimeout(() => {\n        setMessage({ message: null, error: false })\n      }, 5000)\n    }\n  }\n  const cancel = () => {\n    setEdit(false)\n  }\n  const deletePoem = async () => {\n    setEdit(false)\n    try {\n      await poemService.removePoem(poem)\n      socket.emit('data_request')\n    } catch (err) {\n      setMessage({ message: `only ${poem.user.username} can delete this content`, error: true })\n      setTimeout(() => {\n        setMessage({ message: null, error: false })\n      }, 5000)\n    }\n  }\n\n  if (!poem) return null\n\n  return (\n    <div className=\"poem-content\">\n      {edit ? (\n        <form onSubmit={submitEdit}>\n          <div><StyledTextArea rows=\"2\" cols=\"30\" {...editedContent} /></div>\n          <div>\n            <Button type=\"submit\">edit</Button>\n            <Button onClick={deletePoem}>delete</Button>\n            <Button onClick={cancel}>nevermind</Button>\n          </div>\n        </form>\n      ) : <div onClick={editContent}>{formattedContent.map((item, i) => {\n        return <p key={i}>{item},</p>\n      })}</div>}\n      <Notification message={message} />\n    </div>\n  )\n}\n\nexport default PoemChild\n","import React, { useState } from 'react'\nimport useField from '../hooks'\nimport poemService from '../services/poems'\nimport Notification from './Notification'\nimport { Input, Button } from './Style'\nimport socket from '../services/socket'\n\nconst PoemTitle = ({ poem, user}) => {\n  const [message, setMessage] = useState({ message: null, error: false })\n  const [edit, setEdit] = useState(false)\n  const editedContent = useField('text')\n  const content = poem.title\n\n  const editContent = () => {\n    setEdit(true)\n    editedContent.onChange({ target: { value: content } })\n  }\n  const submitEdit = async (event) => {\n    try {\n      if(!user) throw new Error('please login to edit')\n      event.preventDefault()\n      if (!editedContent.value) throw new Error('ghostin too hard')\n      await poemService.editTitle(editedContent.value, poem._id)\n      setEdit(false)\n      socket.emit('data_request')\n    } catch (err) {\n      setEdit(false)\n      let mess = err.message\n      if (err.message === 'wrong user') mess = `only ${poem.user.username} can edit this`\n      setMessage({ message: mess, error: true })\n      setTimeout(() => {\n        setMessage({ message: null, error: false })\n      }, 5000)\n    }\n  }\n  const cancel = () => {\n    setEdit(false)\n  }\n\n  if (!poem) return null\n\n  return (\n    <div className=\"poem-content\">\n      {edit ? (\n        <form onSubmit={submitEdit}>\n          <div><Input {...editedContent} data-cy = 'title-input'/></div>\n          <div className=\"title-buttons\">\n            <Button type=\"submit\" data-cy = 'title-submit'>edit</Button>\n            <Button onClick={cancel}>nevermind</Button>\n          </div>\n        </form>\n      ) : <div className=\"poem-title\" onClick={editContent} data-cy = 'poem-title'>{content}</div>}\n      <Notification message={message} />\n    </div>\n  )\n}\n\nexport default PoemTitle\n","import axios from 'axios'\n\nconst getUser = async (id) => {\n  const response = await axios.get(`/api/users/${id}`)\n  return response.data\n}\n\nconst newUser = async (user) => {\n  const response = await axios.post('/api/users/', user)\n  return response.data\n}\n\nexport default {getUser, newUser}","import React, { useState, useEffect, useRef } from 'react'\nimport { useSelector } from 'react-redux'\nimport PoemChild from './PoemChild'\nimport PoemTitle from './PoemTitle'\nimport Notification from './Notification'\nimport poemService from '../services/poems'\nimport userService from '../services/users'\nimport useField from '../hooks'\nimport { Button, StyledTextArea, StyledPoem } from './Style'\nimport socket from '../services/socket'\n\nconst Poem = ({ poem }) => {\n  const user = useSelector((state) => state.user)\n  const [message, setMessage] = useState({ message: null, error: false })\n  const [enjoyStyle, setEnjoyStyle] = useState(false)\n  const [toggle, setToggle] = useState({ show: false, label: 'contribute' })\n  const addedContent = useField('text')\n  const enjoyB = useRef(null)\n\n  useEffect(() => {\n    async function userLikes() {\n      const u = await userService.getUser(user.username)\n      if (u.likedPoems.includes(poem._id)) {\n        setEnjoyStyle(true)\n      }\n    }\n    if (user) userLikes()\n  }, [poem, user])\n\n  const addEnjoy = async () => {\n    enjoyB.current.blur()\n    try {\n      if (!user) throw new Error('please login to enjoy :)')\n      \n      if (!enjoyStyle) {\n        await poemService.addLike({\n          ...poem,\n          likes: poem.likes + 1,\n          user: poem.user.id,\n          children: poem.children ? poem.children.map((c) => c._id) : null,\n        })\n\n        socket.emit('data_request')\n        setEnjoyStyle(true)\n      } else {\n        await poemService.removeLike(poem._id)\n        console.log('test remove')\n        socket.emit('data_request')\n        setEnjoyStyle(false)\n      }\n    } catch (err) {\n      console.log(err)\n      setMessage({ message: err.message, error: true })\n      setTimeout(() => {\n        setMessage({ message: null, error: false })\n      }, 5000)\n    }\n  }\n\n  const toggleView = () => {\n    if (user) {\n      if (toggle.show) {\n        setToggle({ show: false, label: 'contribute' })\n        addedContent.onSubmit()\n      } else {\n        setToggle({ show: true, label: 'cancel' })\n      }\n    } else {\n      setMessage({ message: 'please login to contribute', error: true })\n      setTimeout(() => {\n        setMessage({ message: null, error: false })\n      }, 5000)\n    }\n  }\n  const submitContent = async (event) => {\n    event.preventDefault()\n    try {\n      await poemService.addContent({ content: addedContent.value }, poem._id)\n      addedContent.onSubmit()\n      setToggle({ show: false, label: 'contribute' })\n      socket.emit('data_request')\n    } catch (err) {\n      setMessage({ message: err.message, error: true })\n      setTimeout(() => {\n        setMessage({ message: null, error: false })\n      }, 5000)\n    }\n  }\n\n  if (!poem) return null\n\n  return (\n    <div className=\"styled-poem\">\n      <StyledPoem >\n        <h2><PoemTitle poem={poem} user={user}/></h2>\n        <PoemChild poem={poem} key={poem._id} user = {user}/>\n        { poem.children ? poem.children.map((c) => <PoemChild poem={c} key={c._id} user = {user}/>) : null }\n        {toggle.show\n          ? (\n            <div>\n              <form onSubmit={submitContent}>\n                <div><StyledTextArea rows=\"2\" cols=\"30\" {...addedContent} data-cy='content-input'/></div>\n                <div>\n                  <Button type=\"submit\" data-cy='content-submit'>submit!</Button>\n                  <Button onClick={toggleView}>{toggle.label}</Button>\n                </div>\n              </form>\n            </div>\n          ) : null}\n        <div className=\"enjoy-button\">\n          {' '}\n          enjoys:\n          {poem.likes}\n          {' '}\n          <Button onClick={() => addEnjoy()} ref={enjoyB} enjoyed={enjoyStyle} data-cy = 'enjoy'> enjoy </Button>\n          {toggle.show ? null : <Button onClick={toggleView} data-cy = 'contribute-toggle'>{toggle.label}</Button>}\n        </div>\n        <Notification message={message} />\n      </StyledPoem>\n    </div>\n  )\n}\n\nexport default Poem\n","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default { login }","import React, { useState } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport useField from '../hooks'\nimport poemService from '../services/poems'\nimport loginService from '../services/login'\nimport { loginUser } from '../reducers/userReducer'\nimport Notification from './Notification'\nimport { Input, Button } from './Style'\n\nconst Login = () => {\n  const dispatch = useDispatch()\n  const [message, setMessage] = useState({ message: null, error: false })\n  const history = useHistory()\n  const username = useField('text')\n  const password = useField('password')\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    \n    try {\n      const user = await loginService.login({\n        username: username.value, password: password.value,\n      })\n      window.localStorage.setItem(\n        'loggedPoemUser', JSON.stringify(user),\n      )\n      poemService.setConfig(user.token)\n      dispatch(loginUser(user))\n      username.onSubmit()\n      password.onSubmit()\n      history.push('/')\n    } catch (exception) {\n      setMessage({ message: 'wrong credentials', error: true })\n      setTimeout(() => {\n        setMessage({ message: null, error: false })\n      }, 5000)\n    }\n  }\n\n  return (\n    <div className=\"login-and-new\">\n      <h2>log in to ghost raps</h2>\n      <form onSubmit={handleLogin} data-cy=\"loginForm\" >\n        <label classname=\"login-and-new-input\">\n          username &nbsp;\n          <Input {...username} data-cy=\"login-username\" />\n        </label>\n        <label>\n          password &nbsp;\n          <Input {...password} data-cy=\"login-password\" />\n        </label>\n        <Button type=\"submit\" data-cy=\"login-button\">login</Button>\n      </form>\n      <Notification message={message} />\n    </div>\n  )\n}\n\nexport default Login\n","import React from 'react'\n\nconst About = () => {\n  return (\n    <p className = 'about-paragraph'>Ghost Raps is an anonymous creative space for people to \n      collaborate on lyrics. Anyone can start a rap with a title and\n      a few lines. Then, anyone can contribute by adding lines. So create \n      an account, get creative, be inspired! If all goes according to plan I'll sell \n      the best raps to Drake (jokes)  \n      Shout out to <a href='//glowtxt.com'>Glowtxt</a> for the title image. Pro tip - use commas at the \n      end of your lines so the formatting looks nice\n    </p>\n  )\n}\n\nexport default About","import React, { useState } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport useField from '../hooks'\nimport userService from '../services/users'\nimport Notification from './Notification'\nimport { newMessage } from '../reducers/messageReducer'\nimport poemService from '../services/poems'\nimport loginService from '../services/login'\nimport { loginUser } from '../reducers/userReducer'\nimport { Input, Button } from './Style'\n\nconst CreateUser = () => {\n  const [message, setMessage] = useState({ message: null, error: false })\n  const dispatch = useDispatch()\n  const history = useHistory()\n  const username = useField('text')\n  const password = useField('password')\n\n  const createUser = async (event) => {\n    event.preventDefault()\n    if (username.value === '' || password.value === '') {\n      setMessage({ message: 'ghostin too hard', error: true })\n      setTimeout(() => {\n        setMessage({ message: null, error: false })\n      }, 5000)\n      return\n    }\n    if(password.value.length <= 3){\n      setMessage({ message: 'need password length longer than 3 characters', error: true })\n      setTimeout(() => {\n        setMessage({ message: null, error: false })\n      }, 5000)\n      return\n    }\n    try {\n      await userService.newUser({ username: username.value, password: password.value })\n      dispatch(newMessage(`new user ${username.value} created!`, false))\n      username.onSubmit()\n      password.onSubmit()\n      const user = await loginService.login({\n        username: username.value, password: password.value,\n      })\n      window.localStorage.setItem(\n        'loggedPoemUser', JSON.stringify(user),\n      )\n      poemService.setConfig(user.token)\n      dispatch(loginUser(user))\n      history.push('/')\n    } catch (err) {\n      setMessage({ message: 'username needs to be unique', error: true })\n      setTimeout(() => {\n        setMessage({ message: null, error: false })\n      }, 5000)\n    }\n  }\n  return (\n    <div className=\"login-and-new\">\n      <h2>create user</h2>\n      <form onSubmit={createUser}>\n        <label classname=\"login-and-new-input\">\n          username &nbsp;\n          <Input {...username} />\n        </label>\n        \n        <label>\n          password &nbsp;\n          <Input {...password} />\n        </label>\n        <Button type=\"submit\" data-cy=\"create-button\">create!</Button>\n      </form>\n      <Notification message={message} />\n    </div>\n  )\n}\nexport default CreateUser\n","import React, { useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useHistory } from 'react-router-dom'\nimport useField from '../hooks'\nimport poemService from '../services/poems'\nimport Notification from './Notification'\nimport { newMessage } from '../reducers/messageReducer'\nimport socket from '../services/socket'\nimport { Input, Button, StyledTextArea } from './Style'\n\nconst NewPoem = () => {\n  const user = useSelector((state) => state.user)\n  const [message, setMessage] = useState({ message: null, error: false })\n  const dispatch = useDispatch()\n  const history = useHistory()\n  const title = useField('text')\n  const content = useField('text')\n\n  const createPoem = async (event) => {\n    event.preventDefault()\n    if (user) {\n      if (title.value === '' || content.value === '') {\n        setMessage({ message: 'ghostin too hard', error: true })\n        setTimeout(() => {\n          setMessage({ message: null, error: false })\n        }, 5000)\n        return\n      }\n      try {\n        await poemService.create({ title: title.value, content: content.value })\n        dispatch(newMessage(`new rap ${title.value} created!`, false))\n        title.onSubmit()\n        content.onSubmit()\n        socket.emit('data_request')\n        history.push('/')\n      } catch (err) {\n        console.log(err)\n        setMessage({ message: err.message, error: true })\n        setTimeout(() => {\n          setMessage({ message: null, error: false })\n        }, 5000)\n      }\n    } else {\n      setMessage({ message: 'please login to create a rap', error: true })\n      setTimeout(() => {\n        setMessage({ message: null, error: false })\n      }, 5000)\n    }\n  }\n  return (\n    <div className=\"new-content\">\n      <h2>create rap</h2>\n      <form onSubmit={createPoem} data-cy=\"poemForm\">\n        <div>\n          title\n          <br />\n          <Input {...title} data-cy=\"poemTitle\" />\n        </div>\n        <div>\n          first lines...\n          <br />\n          <StyledTextArea rows=\"2\" cols=\"40\" {...content} data-cy=\"poemContent\" />\n        </div>\n        <Button type=\"submit\" data-cy=\"create-button\">create!</Button>\n      </form>\n      <div className = 'notification-wrapper'>\n        <Notification message={message} />\n      </div>\n    </div>\n  )\n}\nexport default NewPoem\n","import React, { useState, useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport './App.css'\nimport Select from 'react-styled-select'\nimport { Switch, Route, NavLink, useLocation } from 'react-router-dom'\nimport { initializePoems } from './reducers/poemReducer'\nimport Poem from './components/Poem'\nimport Login from './components/Login'\nimport About from './components/About'\nimport Notification from './components/Notification'\nimport CreateUser from './components/CreateUser'\nimport poemService from './services/poems'\nimport { loginUser, logoutUser } from './reducers/userReducer'\nimport NewPoem from './components/NewPoem'\nimport { Button } from './components/Style'\nimport { removeMessage } from './reducers/messageReducer'\n\nfunction App() {\n  const dispatch = useDispatch()\n  const message = useSelector((state) => state.message)\n  const poems = useSelector((state) => state.poems)\n  const user = useSelector((state) => state.user)\n  const [sort, setSort] = useState('new')\n  const [viewSort, setViewSort] = useState('flex')\n  const location = useLocation()\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedPoemUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      dispatch(loginUser(user))\n      poemService.setConfig(user.token)\n    }\n    dispatch(initializePoems())\n    if (message.message) {\n      setTimeout(() => {\n        dispatch(removeMessage())\n      }, 5000)\n    }\n  }, [dispatch, message])\n  \n  useEffect(() => {\n    if(location.pathname === '/'){\n      setViewSort('flex')\n    } else {\n      setViewSort('none')\n    }\n  },[location])\n\n  const handleLogout = () => {\n    dispatch(logoutUser())\n    poemService.setConfig(null)\n    window.localStorage.removeItem('loggedPoemUser')\n  }\n  const sortTop = (poems) => {\n    poems.sort((a, b) => b.likes - a.likes)\n    return poems\n  }\n  const sortNew = (poems) => {\n    poems.sort((a, b) => {\n      const da = new Date(a.updatedAt).getTime()\n      const db = new Date(b.updatedAt).getTime()\n      return db - da\n    })\n    return poems\n  }\n\n  const sortSelector = (poems, sort) => {\n    if (sort === 'new') return sortNew(poems)\n    if (sort === 'top') return sortTop(poems)\n  }\n  const handleChange = (value) => {\n    setSort(value)\n  }\n  const handleView = (value) => {\n    setViewSort(value)\n  }\n  const sortStyle = {\n    display: viewSort\n  }\n\n  return (\n    <div className=\"main-page\">\n      <div className=\"left-col\">\n        <div>\n\n          <img className=\"ghost-title\" src='/GhostRaps.gif' alt=\"title\" />\n\n          <div className=\"navigation\">\n            <NavLink  activeStyle={{ fontWeight: \"bold\",color: \"gray\" }} \n              className=\"link\" to='/' exact data-cy=\"link-home\" onClick = {() => handleView('flex')}>home</ NavLink>\n            <NavLink activeStyle={{ fontWeight: \"bold\",color: \"gray\" }}\n              className=\"link\" to=\"/new_rap\" data-cy=\"link-new-rap\" onClick = {() => handleView('none')} >new rap</NavLink>\n            <NavLink activeStyle={{ fontWeight: \"bold\",color: \"gray\" }}\n              className=\"link\" to=\"/about\" onClick = {() => handleView('none')} >about</NavLink>\n            {user ? null : <NavLink activeStyle={{ fontWeight: \"bold\",color: \"gray\" }}\n                className=\"link\" to=\"/create_user\" data-cy = 'link-new-user' onClick = {() => handleView('none')} >new user</NavLink>}\n            {user\n              ? (\n                <span className=\"header-span\">\n                  {user.username}\n                  {' '}\n                  logged in\n                  {' '}\n                  <Button onClick={handleLogout}>logout</Button>\n                </span>\n              )\n              : <NavLink activeStyle={{ fontWeight: \"bold\",color: \"gray\" }}\n                  className=\"link\" to=\"/login\" data-cy = 'link-login' onClick = {() => handleView('none')} >login</NavLink>}\n          </div>\n\n          <div className=\"sort-bar\" style = {sortStyle}>\n            <span className=\"sort-span\"> sort... </span>\n            {' '}\n            <Select\n              className=\"dark-theme\"\n              options={[{ label: 'new', value: 'new' }, { label: 'top', value: 'top' }]}\n              label=\"sort\"\n              onChange={handleChange}\n              placeholder={sort}\n            />\n          </div>\n\n          <div className=\"ghost-div\">\n            <img className=\"ghost-image\" src='/spaceghost_purp2.jpg' alt=\"ghost\" />\n          </div>\n\n        </div>\n\n      </div>\n\n      <Switch>\n        <Route path=\"/login\" >\n          <div className=\"side-content\">\n            <Login />\n          </div>\n        </Route>\n        <Route path=\"/new_rap\">\n          <div className=\"side-content\">\n            <NewPoem />\n          </div>\n        </Route>\n        <Route path=\"/about\">\n          <div className=\"side-content\">\n            <About />\n          </div>\n        </Route>\n        <Route path=\"/create_user\">\n          <div className=\"side-content\">\n            <CreateUser />\n          </div>\n        </Route>\n        <Route exact path=\"/\">\n          <div className=\"home-page\">\n\n            <p className=\"main-message\">\n              <Notification message={message} />\n            </p>\n\n            <div>\n              {sortSelector(poems, sort).map((p) => (\n                <div key={p._id}>\n                  {!p.head ? <Poem poem={p} /> : null}\n                </div>\n              ))}\n            </div>\n          </div>\n        </Route>\n\n      </Switch>\n\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport './index.css'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport App from './App'\nimport store from './store'\n\nconsole.log('public url: ', process.env.PUBLIC_URL)\nReactDOM.render(\n  <Provider store={store}>\n    <Router>\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById('root'),\n)\n"],"sourceRoot":""}